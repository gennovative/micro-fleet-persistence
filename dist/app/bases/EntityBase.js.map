{"version":3,"sources":["app/bases/EntityBase.ts"],"names":[],"mappings":";;AAAA,yCAAkC;AAClC,MAAM,OAAO,GAAG,OAAO,CAAC,gBAAgB,CAAC,CAAC;AAC1C,MAAM,OAAO,GAAG,OAAO,CAAC,gBAAgB,CAAC,CAAC;AAC1C,MAAM,SAAS,GAAG,OAAO,CAAC,OAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC;AACvD,MAAM,SAAS,GAAG,OAAO,CAAC,OAAO,CAAC,kBAAkB,CAAC,CAAC,CAAC;AAGvD,gBAAiC,SAAQ,iBAAK;IAA9C;;QASQ,OAAE,GAAY,SAAS,CAAC;IAyBhC,CAAC;IAhCA;;OAEG;IACH,MAAM,KAAK,SAAS;QACnB,MAAM,mDAAmD,CAAC;IAC3D,CAAC;IAID;;OAEG;IACI,mBAAmB,CAAC,IAAI;QAC9B,IAAI,GAAG,KAAK,CAAC,mBAAmB,CAAC,IAAI,CAAC,CAAC;QAEvC,MAAM,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,KAAK,EAAE,GAAG;YAC/B,wCAAwC;YACxC,MAAM,CAAC,SAAS,CAAM,GAAG,CAAC,CAAC;QAC5B,CAAC,CAAC,CAAC;IACJ,CAAC;IAED;;OAEG;IACI,kBAAkB,CAAC,IAAI;QAC7B,IAAI,GAAG,OAAO,CAAC,IAAI,EAAE,CAAC,KAAK,EAAE,GAAG;YAC/B,wCAAwC;YACxC,MAAM,CAAC,SAAS,CAAM,GAAG,CAAC,CAAC;QAC5B,CAAC,CAAC,CAAC;QAEH,MAAM,CAAC,KAAK,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;IACvC,CAAC;CACD;AAlCD,gCAkCC;AAED,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC","file":"EntityBase.js","sourcesContent":["import { Model } from 'objection';\r\nconst mapKeys = require('lodash/mapKeys');\r\nconst memoize = require('lodash/memoize');\r\nconst snakeCase = memoize(require('lodash/snakeCase'));\r\nconst camelCase = memoize(require('lodash/camelCase'));\r\n\r\n\r\nexport abstract class EntityBase extends Model {\r\n\r\n\t/**\r\n\t * @abstract\r\n\t */\r\n\tstatic get tableName(): string {\r\n\t\tthrow 'This method must be implemented by derived class!';\r\n\t}\r\n\r\n\tpublic id: BigSInt = undefined;\r\n\r\n\t/**\r\n\t * This is called when an object is serialized to database format.\r\n\t */\r\n\tpublic $formatDatabaseJson(json) {\r\n\t\tjson = super.$formatDatabaseJson(json);\r\n\r\n\t\treturn mapKeys(json, (value, key) => {\r\n\t\t\t// Maps from \"camelCase\" to \"snake_case\"\r\n\t\t\treturn snakeCase(<any>key);\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * This is called when an object is read from database.\r\n\t */\r\n\tpublic $parseDatabaseJson(json) {\r\n\t\tjson = mapKeys(json, (value, key) => {\r\n\t\t\t// Maps from \"snake_case\" to \"camelCase\"\r\n\t\t\treturn camelCase(<any>key);\r\n\t\t});\r\n\r\n\t\treturn super.$parseDatabaseJson(json);\r\n\t}\r\n}\r\n\r\nEntityBase.knex(null);"]}